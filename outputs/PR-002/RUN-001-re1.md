run_id: RUN-001-re1
prompt_id: PR-002
timestamp: 2026-02-14 14:02
model: gpt-5.2
output_hash: 457a266537fd656e3b3467876514d429326f707bc61b01a39fa987611ff859da

# 修正計画（RUN-001-re1）

対象：企画書 `planning/planning.md
生成済み要件定義 `outputs/PR-001/RUN-001.md
DeepEval結果 `deepeval/output/eval_requirements.json`

前提：

- **推測で機能追加はしない**（必要情報が足りない場合はTBD化し、質問として明記する）
- 本書は「要件定義書そのもの」ではなく、**要件定義を改善するための修正計画**である

---

## 1. 優先修正IDトップ10（表）

選定根拠（共通）：DeepEvalのreasonより、各IDで「チェックリスト必須ゲート観点に対する照合・判定・不足列挙・追記案がない」ことが主要な失点要因（チェックリスト適合がほぼ全IDでFail）となっている。

| ID     | 問題要約（1行）                                                               | 根拠（評価reason要約）                                           | 修正方針（何を追記/削除）                                                                                                                                                                                                                  | 追加で必要な情報（TBD/質問）                                                |
| ------ | ----------------------------------------------------------------------------- | ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------- |
| FR-001 | ロール/用語/依存/例外/ログ等のチェックリスト観点が未補完                      | 「チェックリスト必須観点ごとの判定・不足列挙・追記案が一切ない」 | **追記**：主語（利用者/管理者/閲覧者）・用語定義（工程/タスク/詳細）・依存（工程マスタ等）・例外（未定義工程選択時）・ログ/証跡の最小粒度（誰/いつ/何を変更）を、要件本文の補足（ARでも可）として明記。**削除**：なし（Howは維持して除外） | TBD：ロール定義（誰が何をするか）／工程種別の確定範囲（要件定義のみ？）     |
| FR-002 | 「工程選択」の主語/権限/境界条件が曖昧                                        | 「観点別照合・判定がない」「不足観点列挙がない」                 | **追記**：工程を選択できるロール、工程が存在しない/紐づくタスクが0件の場合の扱い（表示/エラー）、タスク展開の観測可能な結果（一覧に何が出るか最小）                                                                                        | TBD：工程一覧の供給元（手入力/事前登録）／閲覧のみロールの有無              |
| FR-003 | タスクチケット項目の必須/任意、未入力時の扱いが未定義                         | 「チェックリスト観点で不足指摘・追記案がない」                   | **追記**：保持項目（目的/観点/チェックリスト/テンプレ/参考資料リンク/判定基準）の必須性、未入力時の扱い（Abort理由必須と同様に必須項目のゲートがあるか）、用語定義（テンプレとは）                                                         | TBD：各項目の最低必須セット（運用上“空だと破綻”する項目）                   |
| FR-004 | 「自動生成しない」方針の適用範囲（どこまでが禁止か）が未具体化                | 「評価プロセスがない」「観点別判定がない」                       | **追記**：禁止対象の明確化（例：タスク自動作成/自動判定/自動ステータス更新等）。**削除**：なし                                                                                                                                             | TBD：AI利用の許容範囲（例：テンプレ保管はOK、サジェストは？）※不明のためTBD |
| FR-005 | ステータス遷移・同時編集・取消等の例外観点が未定義                            | 「例外/失敗時、ログ/証跡等の観点評価がない」                     | **追記**：最低限の遷移ルール（例：ToDo→Done/Abort、Abort→ToDoの可否）を“運用上の前提”として明文化（実装Howではなくルール）。**追記**：変更履歴（AR-002）との依存関係を明記                                                                 | TBD：Abortから復帰させる運用の有無／並行編集時の優先（後勝ち等）            |
| FR-006 | Abort理由の粒度/必須性はあるが、理由の品質・参照性が未定義                    | 「チェックリスト観点（ログ/証跡粒度等）未評価」                  | **追記**：Abort理由の最小文字数/カテゴリ（固定は避けるなら自由記述でOK等）や、後から参照できる単位（タスク詳細画面/履歴）を要件として明記                                                                                                  | TBD：理由の入力制約（自由記述のみか、例のカテゴリを選ぶか）                 |
| FR-007 | 「品質履歴に含める」の履歴スコープ（どの期間/単位）が未定義                   | 「観点別照合・不足列挙がない」                                   | **追記**：履歴の単位（プロジェクト/スナップショット/期間）と、出力（可視化/エクスポート）への包含条件を明確化（AR-004との整合）                                                                                                            | TBD：履歴の保持期間／削除可否（監査要件次第）                               |
| FR-009 | フロー図の受入基準が抽象（何が識別できれば合格か）                            | 「測定可能性（AC）観点の評価がない」                             | **追記**：最小AC（例：Doneの順序関係が確認できる／Abort分岐点と理由が参照できる）を2〜3個に具体化。**削除**：描画方式等Howは対象外維持                                                                                                     | TBD：タスク接続の定義（順序は固定？任意？）                                 |
| FR-010 | スナップショットの識別/一覧・復元の前提がAR側に分散し、依存が明示されていない | 「観点別評価・依存関係の明示がない」                             | **追記**：AR-003（一覧/識別）・AR-004（エクスポート範囲）への依存関係をFR-010側に明記（“スナップショットは識別可能であること”）。**削除**：なし                                                                                            | TBD：保存時の命名（任意入力必須？）／復元操作のロール                       |
| FR-012 | UI統一性“検証対象”の入力（設計仕様）と結果の残し方（ログ/証跡）が未定義       | 「チェックリスト観点（入力/観測可能性/ログ）未評価」             | **追記**：UI統一性検証の対象となる「設計仕様」の所在（URL/資料リンク等）をタスクチケットの参考資料リンクで持つ等、要件間の繋がりを明確化。検証結果の記録単位（Done/Abort＋理由）への落とし込み                                             | TBD：UI設計仕様の形式（Figma/Markdown等）／どのレベルを“統一”とみなすか     |

> 注：上表の「根拠」は、DeepEvalのreasonで繰り返し指摘されている「チェックリスト観点ごとの判定・不足列挙・追記案がない」ことを要約している。個別に「企画遵守」スコアが高いID（例：FR-006/FR-007/AR-001等）でも、チェックリスト適合はFailとなっており、修正の優先度は高い。

---

## 2. 追加が必要な要件ID案（FR/AR）

### 2-1. 企画書の重要要素（E1〜E12）要約（7〜12個）と既存ID紐付け

| 企画要素 | 要約（企画書の重要要素）                                                                 | 対応する既存要件ID                             |
| -------- | ---------------------------------------------------------------------------------------- | ---------------------------------------------- |
| E1       | 課題：QA観点の属人化・散在・中身が見えない                                               | FR-008, AR-002, AR-005                         |
| E2       | 目的：QAを構造化・可視化・再利用・判断ログ化する                                         | FR-001, FR-009, FR-010, FR-011, AR-001, AR-005 |
| E3       | 基本思想：AIに判断させない／判断は人が行う                                               | FR-004                                         |
| E4       | コンセプト：工程選択で必要タスク展開→観点/テンプレ表示→記録→可視化                       | FR-002, FR-003, FR-005, FR-009                 |
| E5       | 階層構造：L1工程/L2タスク/L3詳細で管理                                                   | FR-001                                         |
| E6       | タスクチケットが保持する情報（目的・観点・チェックリスト・テンプレ・参考資料・判定基準） | FR-003                                         |
| E7       | ステータス：ToDo/Done/Abort（Abort理由必須）                                             | FR-005, FR-006                                 |
| E8       | Abort思想：対象外/前提未確定/スコープ外等も正式な品質判断としてログ化                    | FR-006, FR-007                                 |
| E9       | 可視化：品質フロー図（Done接続＋Abort分岐表示）                                          | FR-009                                         |
| E10      | 保存/再利用：スナップショット保存、JSONエクスポート（日報）                              | FR-010, FR-011, AR-003, AR-004                 |
| E11      | UI統一性も品質検証対象（再現性確認）                                                     | FR-012                                         |
| E12      | ロードマップ：Phase1は要件定義工程のみ、以降拡張                                         | （既存要件に明確な“フェーズ境界”要件なし）     |

#### E12（ロードマップ）に対する不足判定

企画書ではPhase1〜4が明示されているが、要件定義側には「Phase1の範囲境界（要件定義工程のみ）」を**要件として固定する記述**が弱い（対象外に触れてはいるが、プロダクトスコープ境界としての合意形成が不足）。

→ 以下の「追加要件案」を提示する。

### 2-2. 追加要件ID案（タイトルと種別のみ）

※企画書に根拠があるが、既存FR/ARで明確に扱えていない/合意が曖昧なものを**最小限**提示する。

- **AR-006（案）**：Phase1スコープ境界の明文化（要件定義工程のみを対象とする）【AR】
- **AR-007（案）**：ロール定義（利用者/管理者/閲覧者）と操作権限の最小整理【AR】

> 補足：権限/ロールはチェックリスト観点⑨で頻繁に不足になりやすく、企画書には明示がないため**TBD前提**で最小要件（ロールの存在と、閲覧/編集/Abort理由入力の可否）を定義する必要がある。

---

## 3. 共通で不足している観点（テンプレ項目）

DeepEval reason（特に「チェックリスト適合」「企画遵守」「抜け漏れ」）の繰り返し指摘から、全体に共通する不足観点は以下。

- **チェックリスト観点での“判定”がない**（①〜⑨の各観点に対して、満たす/一部不足/満たさない が未記載）
- **不足観点の列挙と追記案がない**（どの観点が欠けているか／どう直すかが未提示）
- **主語（ロール）不明**：多くの要件が「誰が」行うかを持たない（③What純度、⑨権限）
- **用語定義不足**：工程/タスク/詳細/セッション/スナップショット/品質履歴 などの定義が散在または未定義（⑤定義・用語）
- **例外/境界条件不足**：未定義工程、タスク0件、Abort理由未入力、保存/復元失敗等（⑦例外/失敗時）
- **ログ/証跡の粒度が未統一**：何をログに残し、どこで参照できるかが要件横断で整理されていない（⑧ログ/証跡）
- **依存関係が明示されない**：FR-010とAR-003/AR-004など、FRとARの依存が文章上つながっていない（⑤依存関係）
- **AC（受入基準）が抽象のものがある**：特に可視化（フロー図）やUI統一性検証で測定可能性が弱い（④測定可能性）
- **Phase境界/対象外の運用上の効き方が曖昧**：ロードマップはあるが、Phase1で実装しないものの扱い（対象外/保留/Abort等）が未整理（②スコープ）

---

### 次アクション（修正の進め方：提案）

1. まず全要件（FR/AR）に対し、チェックリスト①〜⑨の簡易判定（Yes/No/保留）を付与
2. 「No/保留」の項目だけ、**要件本文に追記する最小文**（Howを避ける）を作成
3. Phase1スコープ境界（AR-006案）とロール/権限（AR-007案）をTBD込みで整理し、要件間の依存（参照先）を明記
