id: FR-010
type: FR
title: スナップショット保存（セッション保存）
role: 利用者（詳細TBD）
what: 工程選択、タスク状態、Abort理由等を含む作業状態を、スナップショットとして保存し、後から同一状態を再現可能な情報として保持できること。
why: 作業時点の状態を証跡として残し、可視化・再利用・日報等に利用できるようにするため。
acceptance_criteria:
- 利用者が作業状態をスナップショットとして保存できること。
- 保存したスナップショットから、保存時点と同一の作業状態を再現できること。
- 保存したスナップショットが、他のスナップショットと区別できる識別情報を持つこと（詳細はAR-003に依存）。
exceptions:
- 保存時の命名（任意入力の要否等）や、識別情報の最小セットはTBD。
- 復元（再現）操作を実行できるロールと、復元失敗時の扱いはTBD。
logs:
- スナップショットが保存された事実と、保存対象（プロジェクト/作業単位等）が後から追跡できること（記録粒度はTBD）。
dependencies:
- AR-003（スナップショットの一覧・識別）
- FR-011（JSON形式エクスポート）
- AR-004（エクスポート対象範囲の明確化：スナップショット単位）
permissions:
- 利用者がスナップショットを保存し、保存済スナップショットを参照できること。
nfr: []
evidence:
- 企画書「7. 可視化機能」：スナップショット保存（セッション保存）の記載。
- 企画書「2. 本企画の目的」：判断ログを残す、再利用可能にする、の記載。
- 既存要件（outputs/PR-001/RUN-001.md）：FR-010の記載（保存/再現可能な情報として保持）。
- 診断（outputs/PR-002/RUN-001-re1.md）：FR-010の修正方針（AR-003/AR-004への依存関係の明示、識別/一覧/復元の前提整理）。
changes_from_current:
- 既存要件（outputs/PR-001/RUN-001.md）の意図（作業状態をスナップショットとして保存し再現可能）を維持した。
- 診断（outputs/PR-002/RUN-001-re1.md）の指摘に基づき、AR-003/AR-004への依存関係（識別/エクスポート範囲）を明示した。
- DeepEvalで繰り返し指摘された「チェックリスト観点（依存、例外/境界、ログ/証跡、ロール等）の不足」をTBDとして明示し、推測で確定しないよう整理した。
tbd:
- スナップショット保存時の識別情報の最小セット（名称の要否、日時など）。
- 復元（再現）操作のロール/権限、および復元失敗時の扱い。
- 保存・参照・復元のログ/証跡の最小粒度（例：誰/いつ/どのスナップショットを保存・参照・復元したか）。
meta:
  run_id: FR-010
  prompt_id: PR-004
  timestamp: 2026-02-14 16:29
  model: gpt-5.2
  output_hash: 70d7d5b8526d513d954d71eced117fff592072e9191a0f52876c950c693fe16b
