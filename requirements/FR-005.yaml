id: FR-005
type: FR
title: タスクステータス管理（ToDo / Done / Abort）
role: 利用者（詳細TBD）
what: 各タスクについて、ToDo／Done／Abort のステータスを利用者が記録し、後から参照できること。
why: タスクの実施状況と判断結果を記録し、後から「何を確認したか」が追跡できる状態にするため。
acceptance_criteria:
- 利用者が、任意のタスクを指定して ToDo／Done／Abort のいずれかのステータスを記録できること。
- タスクは常に ToDo／Done／Abort のいずれか1つの状態を取り、記録後に参照できること。
- 最低限の状態遷移の運用前提（例：ToDo→Done/Abort）が定義されていること（詳細はTBD）。
exceptions:
- タスクが存在しない場合や識別できない場合の扱いはTBD（記録できないことが利用者に分かる結果が必要）。
- Abort→ToDo（復帰）等の可否、および同時編集時の扱い（優先・競合解決）はTBD。
logs:
- タスクのステータスが変更された事実が、後から追跡できること（記録粒度はTBD）。
dependencies:
- FR-006（Abort時の理由必須記録）
- AR-002（変更履歴の追跡：誰が/いつ/何を判断したかの最小記録）
permissions:
- 利用者がタスクのステータスを記録・参照できること。
nfr: []
evidence:
- 企画書「6. ステータス設計」：各タスクに ToDo／Done／Abort を持つ旨の記載。
- 企画書「1. 企画背景」：『何を確認したか』が記録されないという課題の記載。
- 既存要件（outputs/PR-001/RUN-001.md）：FR-005の記載（ToDo／Done／Abort のステータスを記録）。
- 診断（outputs/PR-002/RUN-001-re1.md）：FR-005の修正方針（最低限の遷移ルール、同時編集など例外観点、AR-002依存の明記）。
changes_from_current:
- 既存要件（outputs/PR-001/RUN-001.md）の意図（タスクにToDo／Done／Abortの状態を記録できる）を維持した。
- 診断（outputs/PR-002/RUN-001-re1.md）の指摘に基づき、例外/境界条件、ログ/証跡、依存関係（AR-002）を最小限追記した。
- DeepEvalで繰り返し指摘された「チェックリスト観点（例外/ログ/証跡、依存、ロール等）の不足」をTBDとして明示し、推測で確定しないよう整理した。
tbd:
- 状態遷移の最小ルール（ToDo→Done/Abortの他、Abort→ToDoの可否、Done→ToDoの可否など）。
- Abortから復帰させる運用の有無。
- 同時編集時の扱い（優先順位、競合時の扱い）。
- ロール定義（利用者/管理者/閲覧者等）と、ロールごとの記録/参照の権限範囲。
- ステータス変更のログ/証跡の最小粒度（例：誰/いつ/どのタスクを/どの状態に変更したか）。
meta:
  run_id: FR-005
  prompt_id: PR-004
  timestamp: 2026-02-14 16:03
  model: gpt-5.2
  output_hash: 64319becf99237f5b0bbb82f66098c759dc4cb466bb15c6df41f960845b5eaf4
