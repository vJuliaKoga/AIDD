id: FR-011
type: FR
title: JSON形式エクスポート（日報利用想定）
role: 利用者（詳細TBD）
what: 特定のスナップショット（セッション）を対象として、タスク状態およびAbort理由等を含む必要情報をJSON形式でエクスポートできること。
why: 作業時点の実施状況と判断ログを、日報等に再利用できる形で外部へ持ち出せるようにするため。
acceptance_criteria:
- 利用者が、エクスポート対象のスナップショット（セッション）を指定してJSON形式のエクスポートを実行できること。
- エクスポートされたJSONに、少なくともタスク状態とAbort理由（Abort時）が含まれること。
- 出力がどのスナップショット由来か識別できること（詳細はAR-004に依存）。
exceptions:
- JSONの詳細なスキーマ（項目名や階層構造等）の確定は対象外（既存要件の対象外を維持）。
- エクスポート失敗時の扱い（再試行可否、利用者への通知等）はTBD。
logs:
- エクスポートが実行された事実と、対象スナップショットが後から追跡できること（記録粒度はTBD）。
dependencies:
- FR-010（スナップショット保存）
- AR-004（エクスポート対象範囲の明確化：スナップショット単位）
permissions:
- 利用者がスナップショットをエクスポートできること。
nfr: []
evidence:
- 企画書「7. 可視化機能」：スナップショット保存、JSON形式エクスポート、日報利用可能の記載。
- 既存要件（outputs/PR-001/RUN-001.md）：FR-011の記載（スナップショットのJSONエクスポート、Abort理由等を含む）。
- 診断（outputs/PR-002/RUN-001-re1.md）：「共通で不足している観点（テンプレ項目）」の指摘（依存関係/例外/ログ/証跡/ロール等）。
changes_from_current:
- 既存要件（outputs/PR-001/RUN-001.md）の意図（特定スナップショットをJSONエクスポートし、タスク状態/Abort理由等を含む）を維持した。
- FR-010およびAR-004への依存関係を明示し、観測可能な受入基準（対象指定、必要情報の包含、由来識別）を最小限具体化した。
- 診断トップ10表にFR-011が見つからないため、共通不足観点の範囲で最小限の補強（依存/例外/ログ/権限/ACの明確化）に留めた。
tbd:
- エクスポート失敗時の扱い（再試行可否、利用者への通知）。
- ロール定義（利用者/管理者/閲覧者等）と、ロールごとのエクスポート権限。
- エクスポート実行のログ/証跡の最小粒度（例：誰/いつ/どのスナップショットをエクスポートしたか）。
meta:
  run_id: FR-011
  prompt_id: PR-004
  timestamp: 2026-02-14 16:35
  model: gpt-5.2
  output_hash: 9c13c848b511c4c22c4ee6ed05503abb79faa9804f346e460dbdfd4b8fcf5a1d
