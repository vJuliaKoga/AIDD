id: FR-001
type: FR
title: 上流QAワークフローの構造化（工程・タスク・詳細の階層管理）
role: 利用者（詳細TBD）
what: 上流工程の品質保証活動を「工程（L1）／タスク（L2）／詳細（L3）」の階層で管理できること。
why: 上流QAを構造化し、可視化・再利用・判断ログを残すことに資するため。
acceptance_criteria:
- 工程（L1）を指定すると、その配下のタスク（L2）一覧を参照できること。
- 任意のタスク（L2）を指定すると、その詳細（L3）（チェック観点・参考プロンプト（テンプレ）・参考資料リンク・判定基準等）を参照できること。
exceptions:
- 未定義の工程（L1）が指定された場合、参照できない旨が利用者に分かる結果となること（例：対象なしの明示）。
logs:
- 本ワークフローの構造（工程/タスク/詳細）に変更があった場合、その変更の事実が後から追跡できること（記録粒度はTBD）。
dependencies:
- FR-003（タスクチケットの情報保持：目的/確認観点/チェックリスト/参考プロンプト（テンプレ）/参考資料リンク/判定基準）
permissions: []
nfr: []
evidence:
- 企画書「5. システム構造」：階層構造（L1=工程、L2=タスク、L3=詳細）の記載。
- 企画書「5. システム構造」：タスクチケット構成（目的/確認観点/チェックリスト/参考プロンプト（テンプレ）/参考資料リンク/判定基準）を保持する記載。
- 企画書「2. 本企画の目的」：構造化・可視化・再利用・判断ログを残す、の記載。
changes_from_current:
- メタ情報（元YAML先頭記載）をスキーマ要件に合わせて meta セクションへ移動（run_id/prompt_id/timestamp/model/output_hash）。
- 既存要件（RUN-001.md）の意図（L1/L2/L3の階層管理）を維持しつつ、診断で優先修正対象となった不足（ロール/用語/依存/例外/ログ）を最小限追記した。
- DeepEvalのreasonで指摘された「チェックリスト観点での不足（例外・ログ/証跡・依存・ロール等）の未補完」に対応するため、ACを2つに具体化し、例外・ログ・依存を明示した。
tbd:
- ロール定義（利用者/管理者/閲覧者等の区分）と、各ロールが工程/タスク/詳細を閲覧・編集できる範囲（権限）。
- 用語定義（工程/タスク/詳細）と、L3（詳細）に含める項目の必須/任意。
- 構造変更時に残すべきログ/証跡の最小粒度（例：誰/いつ/何を変更したか）。
meta:
  run_id: FR-001
  prompt_id: PR-004
  timestamp: 2026-02-14 15:19
  model: gpt-5.2
  output_hash: 5411941af15f5f61420876ae4e10d82723183573539bc858cb8dac24b20563df