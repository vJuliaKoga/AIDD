run_id: FR-001_fail
prompt_id: PR-003
timestamp: 2026-02-12 09:12
model: gpt-5.2
output_hash: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855

id: FR-001
type: FR
title: 上流QAワークフローの構造化（工程・タスク・詳細の階層管理）
role: 利用者（詳細TBD）
what: 上流工程の品質保証活動を「工程（L1）／タスク（L2）／詳細（L3）」の階層で管理し、参照できること。
why: 上流QAの思考順序を標準化し、観点・テンプレ等を散在させずに再利用可能にし、判断ログを残せるようにするため。
acceptance_criteria:
  - 工程（L1）を指定すると、その配下のタスク（L2）一覧を参照できること。
  - 任意のタスク（L2）を指定すると、その詳細（L3）（チェック観点・チェックリスト・参考プロンプト（テンプレ）・参考資料リンク・判定基準等）を参照できること。
  - 自動生成は行わず、保持対象（L3の内容）は利用者が参照できる形で保持されること。
exceptions:
  - 未定義の工程（L1）が指定された場合、参照できない旨が利用者に分かる結果となること（例：対象なしの明示）。
  - 工程（L1）配下にタスク（L2）が存在しない場合の扱いはTBD（利用者に分かる結果が必要）。
logs:
  - 本ワークフローの構造（工程/タスク/詳細）に変更があった場合、その変更の事実が後から追跡できること（誰/いつ/何を、の最小粒度はTBD）。
dependencies:
  - FR-003（タスクチケットの情報保持：目的/確認観点/チェックリスト/参考プロンプト（テンプレ）/参考資料リンク/判定基準）
permissions:
  - 利用者が工程/タスク/詳細を参照できること。
nfr: []
evidence:
  - 企画書（planning/planning.md）「5. システム構造」：階層構造（L1=工程、L2=タスク、L3=詳細）の記載。
  - 企画書（planning/planning.md）「5. システム構造」：タスクチケット構成（目的/確認観点/チェックリスト/参考プロンプト（テンプレ）/参考資料リンク/判定基準）を保持し、※自動生成は行わない、の記載。
  - 既存要件（outputs/PR-001/RUN-001.md）：FR-001の記載（L1/L2/L3の階層管理、対象外の明示）。
  - 診断（outputs/PR-002/RUN-001-re1.md）：FR-001が優先修正対象であり、ロール/用語/依存/例外/ログ等の不足を補完する方針の記載。
changes_from_current:
  - 既存要件（outputs/PR-001/RUN-001.md）の意図（L1/L2/L3の階層管理）を維持した。
  - 診断（outputs/PR-002/RUN-001-re1.md）の指摘に基づき、例外（未定義工程/タスク0件）・ログ（変更追跡の最小粒度TBD）・権限（参照）を最小限追記した。
  - DeepEvalの指摘（チェックリスト必須観点の不足）に対応するため、ACを観測可能な形に整理し、依存（FR-003）を明示した。
tbd:
  - ロール定義（利用者/管理者/閲覧者等の区分）と、各ロールが工程/タスク/詳細を閲覧・編集できる範囲（権限）。
  - 用語定義（工程/タスク/詳細）と、L3（詳細）に含める項目の必須/任意。
  - 構造変更時に残すべきログ/証跡の最小粒度（例：誰/いつ/何を変更したか）。