id: FR-002
type: FR
title: 工程選択に応じた必要タスクの展開
role: 利用者（詳細TBD）
what: 利用者が工程を選択すると、当該工程に紐づくタスク群が利用可能状態として展開され、タスク一覧として参照できること。
why: 工程ごとに必要なQAタスクを欠落なく提示し、以降の実施記録・可視化の対象とするため。
acceptance_criteria:
- 工程を選択すると、当該工程に紐づくタスク一覧を参照できること。
- タスク一覧には、各タスクを識別できる情報と、初期状態を含むこと。
- 展開されたタスクが、以降の実施記録（ToDo／Done／Abort 等）の対象として扱えること。
exceptions:
- 未定義の工程が指定された場合、タスクを展開できない旨が利用者に分かる結果となること（例：対象なしの明示）。
- 選択した工程に紐づくタスクが0件の場合、0件であることが利用者に分かる結果となること。
logs:
- 工程の選択によりタスクが展開された事実が、後から参照できること（記録粒度はTBD）。
dependencies:
- FR-001（工程/タスク/詳細の階層管理）
- FR-003（タスクチケットの情報保持）
- FR-005（タスクステータス管理）
- FR-008（実施ステータスの記録）
permissions:
- 利用者が工程を選択し、当該工程のタスク一覧を参照できること。
nfr: []
evidence:
- 企画書「4. コンセプト」：工程スイッチを押すと必要なタスクが展開される旨の記載。
- 企画書「5. システム構造」：L1=工程/L2=タスクの階層構造の記載。
- 既存要件（outputs/PR-001/RUN-001.md）：FR-002の記載（工程選択→当該工程のタスク一覧を提示）。
- 診断（outputs/PR-002/RUN-001-re1.md）：FR-002の修正方針（主語/権限/境界条件/観測可能な結果の明確化）。
changes_from_current:
- 既存要件（outputs/PR-001/RUN-001.md）の意図（工程選択で当該工程のタスク一覧を展開）を維持した。
- 診断（outputs/PR-002/RUN-001-re1.md）の修正方針に基づき、ロール、例外/境界条件、ログ/証跡、依存関係、受入基準を最小限追記した。
- DeepEval reasonで指摘された「観点別照合・不足列挙・追記案がない」点に対応し、測定可能な受入基準と境界条件を明確化した。
tbd:
- 工程を選択できるロールの確定（利用者/管理者/閲覧者の有無）と、ロールごとの閲覧/操作範囲（権限）。
- 工程の選択肢（工程種別）の確定範囲（例：要件定義/基本設計/詳細設計）と、工程定義の管理・更新の運用。
- 工程（L1）とタスク（L2）の紐づけの提供方法（事前登録/手入力等）。
meta:
  run_id: FR-002
  prompt_id: PR-004
  timestamp: 2026-02-14 15:51
  model: gpt-5.2
  output_hash: f234022406c5405b19617cbf66212e83b7ee4d609e4634ea119538135334381b
